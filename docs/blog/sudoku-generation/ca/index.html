<!DOCTYPE html><html><head>
        <title>Generació de sudokus | Carles Capellas</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="author" content="Carles Capellas">
        <meta name="theme-color" content="#000000">
        <meta name="robots" content="index, follow">

        <script type="text/javascript">
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('/sw.js?$modena=vue-personal-page', {
                        scope: '/vue-personal-page'
                    });
                });
            }
        </script>
        <link rel="manifest" href="/manifest.json?$modena=vue-personal-page">
        <link rel="icon" type="image/png" href="/favicon.png?$modena=vue-personal-page">
    <link href="/css/index.css?$modena=vue-personal-page" rel="stylesheet"><script async="" src="https://www.google-analytics.com/analytics.js" charset="utf-8"></script><meta data-vue-meta="1" name="description" content="Tot el que necessites saber per construir un generador de sudokus"></head>
    <body id="page-top">
        <noscript>
            <h1>Carles Capellas</h1>
            <p>JavaScript is required to load my page</p>
        </noscript>
        <div id="app"><nav id="main-nav" class="navbar navbar-expand-md fixed-top navbar-shrink"><div class="container"><button type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right"><i class="fa fa-bars fa-2x"></i></button> <div id="navbarResponsive" class="collapse navbar-collapse"><ul class="navbar-nav text-uppercase ml-auto"><li class="nav-item"><a class="theme-switcher clickable"><span>🌗</span></a></li> <li class="nav-item"><a href="/vue-personal-page/" class="nav-link router-link-active">Home</a></li> <li class="nav-item"><a href="/vue-personal-page/blog" class="nav-link router-link-active">Blog</a></li> <li class="nav-item"><a href="/vue-personal-page/projects" class="nav-link">Projects</a></li> <li class="nav-item"><a href="/vue-personal-page/trips" class="nav-link">Trips</a></li> <li class="nav-item"><a target="_blank" href="/pdf/cv.pdf?$modena=vue-personal-page" class="nav-link">CV</a></li></ul></div></div></nav> <!----> <section class="container navbar-spacer"><div class="blog-entry"><div class="blog-entry-header"><div><h4 class="blog-title">Generació de sudokus</h4> <p><span class="blog-date">📅 2020-04-29</span> <span class="blog-duration">🕐 9 mins</span> <span><span class="blog-language clickable selected">🌎 CA</span><span class="blog-language clickable">🌎 EN</span></span> <span class="blog-tag web-development-tag">Web development</span></p> <div class="navigation-buttons"><button type="button" class="btn btn-primary">Previous</button> <!----> <button type="button" class="btn btn-primary">Following</button></div></div></div> <div class="article-container"><div><p>
        La meva mare sempre ha estat una lectora fervent de diaris i, amb els anys, ha cultivat l'afició de completar els jocs que els diaris inclouen a les últimes pàgines. Entre aquests jocs sempre se n'hi troba un anomenat
        <a href="https://en.wikipedia.org/wiki/Sudoku" target="_blank">sudoku</a>. Dos de fet; un de dificultat raonable i un de completament malvat. Va ser mentre ella estava enfeinada resolent el primer sudoku que la vaig interrompre. No recordo que volia en aquell moment, però si que recordo que vam parlar del sudoku i que em vaig fixar en la diferència de dificultat entre els dos nivells.
    </p> <div><div class="screen-splitter"><div><div class="sudoku-grid size-9"><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">1</div><div class="sudoku-cell">7</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">5</div><div class="sudoku-cell">3</div></div><div class="sudoku-row"><div class="sudoku-cell">3</div><div class="sudoku-cell">5</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div><div class="sudoku-cell">4</div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div><div class="sudoku-cell">9</div></div><div class="sudoku-row"><div class="sudoku-cell">8</div><div class="sudoku-cell">9</div><div class="sudoku-cell"> </div><div class="sudoku-cell">3</div><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell">5</div><div class="sudoku-cell">3</div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell">7</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">5</div><div class="sudoku-cell"> </div><div class="sudoku-cell">6</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell">1</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div><div class="sudoku-cell"> </div><div class="sudoku-cell">5</div><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div><div class="sudoku-cell">5</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">3</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div><div class="sudoku-cell">5</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div><div class="sudoku-cell">9</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div><div class="sudoku-cell"> </div></div></div> <p class="text-center">Sudoku fàcil</p></div> <div><div class="sudoku-grid size-9"><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div></div><div class="sudoku-row"><div class="sudoku-cell">4</div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div><div class="sudoku-cell">1</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div><div class="sudoku-cell">1</div><div class="sudoku-cell"> </div><div class="sudoku-cell">3</div><div class="sudoku-cell"> </div><div class="sudoku-cell">5</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell">9</div><div class="sudoku-cell">6</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell">9</div><div class="sudoku-cell">8</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell">5</div><div class="sudoku-cell">1</div><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">6</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">1</div></div></div> <p class="text-center">Sudoku difícil</p></div></div> <p>
            En el diari que la mama llegia aquell dia en concret, el sudoku fàcil tenia 28 caselles omplertes de les 81 caselles totals mentre que el sudoku difícil en tenia 29.
            <b>Com podia ser que el sudoku més complicat tingués més caselles omplertes!?</b> En altres paraules, no depen del número de caselles omplertes la dificultat del sudoku? Almenys, aquesta és la sensació que jo tenia. La veritat és que mai m'havia parat a pensar com es generen els sudokus. N'havia solucionat alguns és clar, però mai havia provat de generar-ne un.
        </p> <p>
            De fet, resulta que no és gens fàcil de generar-los. Una propietat important d'un sudoku ben generat és que només té una solució possible. Pot sonar obvi però, depenent de com i quantes caselles tingui omplertes, un sudoku pot tenir múltiples solucions vàlides. L'exemple més famós és el sudoku que la cadena de televisió britànica Sky TV va dibuixar en un turó oferint 5000£ de premi per la solució; va resultar que tenia
            <a href="https://www.sudokuwiki.org/Sudoku_Creation_and_Grading.pdf" target="_blank">1905 solucions possibles</a>. Aquesta anècdota va aconseguir despertar la meva curiositat.
        </p> <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/sky-tv-hillside.jpg?$modena=vue-personal-page" alt="Sky TV hillside sudoku"></p> <p><b>Normalment hi hauria rumiat una estona</b>, m'hauria adonat que és una tasca matemàticament complexa, hauria conclòs que la quantitat de temps lliure que requereix trobar una solució al problema excedeix la curiositat que em genera el tema
            <b>i finalment ho hauria deixat córrer</b>. Tanmateix resulta que acabava de començar un any sabàtic a la feina i que, degut a les mesures preventives contra el COVID-19, es va cancelar el vol sense retorn que havia d'agafar el 31 de març per anar a viure a Austràlia. Així doncs,
            <b>com que estava sense feina, tancat a casa i amb la major quantitat de temps lliure de la que mai hagués disposat</b> (a Espanya el confinament pel coronavirus va començar el 15 de març i havia de durar almenys un mes), vaig decidir que descobriria com generar sudokus 💪
        </p> <p>
            El que va venir a continuació va ser un camí més llarg del que m'havia esperat. Vaig estar apunt de donar el projecte per perdut vàries vegades però, per sort, vaig mirar
            <a href="https://www.imdb.com/title/tt4276820/" target="_blank">The Founder</a> entremig, la pel·lícula que explica com Ray Kroc va transformar McDonald's en la cadena de restaurants més gran del món gràcies a la seva persistència a prova de bales. La veritat sigui dita, aquesta odissea va tenir quatre fases:
        </p> <p><b>1. Resultats, resultats, resultats</b>: No vaig poder resistir l'impuls de voler veure part de la feina acabada sense haver de pensar massa. Vaig assumir que el procés de generar un sudoku de 9x9 seria el mateix que el de generar-ne un de 4x4 i vaig tirar per un algoritme de consola ràpid.
        </p> <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/command-line.png?$modena=vue-personal-page" alt="Command line generated sudoku" class="limited-size-image"></p> <p><b>2. Punyeta! Necessito una eina gràfica</b>: En teoria, només havia d'adaptar l'algoritme per generar sudokus de 9x9 i aquí acabaria la història. A la pràctica, resulta que els sudokus de 9x9 tenen poc a veure amb els de 4x4. No aconseguia entendre que estava fent malament només amb la informació que l'algoritme escrivia a la consola, així que no vaig tenir més remei que construir una eina gràfica.
        </p> <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/command-line-error.png?$modena=vue-personal-page" alt="Command line generation error" class="limited-size-image"></p> <p><b>3. Cordons... això és complicat</b>: No em va portar gaire estona crear una aplicació web per representar sudokus de 9x9. Amb la representació visual del sudoku i la capacitat de fer i desfer omplint les caselles, vaig començar a entendre què m'havia passat per alt. Les regles bàsqies del sudoku (és a dir, un número no pot anar a una casella si ja hi ha el mateix número a la fila, columna o regió de la casella) contenen un conjunt de regles derivades que no son òbvies a primer cop d'ull.
        </p> <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/web-app-first-approach.png?$modena=vue-personal-page" alt="Web application first approach" class="limited-size-image"></p> <p><b>4. La llum al final del túnel</b>: Després de seure i donar-hi unes quantes voltes, com hauria d'haver fet des del principi, vaig trobar unes quantes d'aquestes regles derivades, que permeten descartar números de caselles. Havent descobert aquestes petites malxinades, només era qüestió de reescriure l'algoritme per considerar-les. Em va portar la seva estona, però finalment vaig aconseguir un generador vàlid.
        </p> <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/web-app-final-approach.png?$modena=vue-personal-page" alt="Web application final approach" class="limited-size-image"></p> <p>
            Mira mama, ho he fet! En el meu cas no vaig construir un enorme imperi de les hamburgueses però si aquest humil
            <a href="/sudoku-generator" target="_blank">generador de sudokus</a>. He d'admetre que a vegades arriba a carrerons sense sortida durant la generació, havent de descartar la feina i començar des de zero, però sempre acaba generant sudokus vàlids amb una única solució. En cas que t'ho estiguis preguntant, aquestes són les regles que utilitza l'algoritme per generar sudokus. De fet, és probable que siguin també les regles que fas servir tu a l'hora de resoldre'ls.
        </p> <ul><li>
                Si a una casella X només hi pot anar un número, aquest número ha d'anar a la casella X i no és vàlid en cap altra casella dels grups de la casella X (fila, columna i regió):
                <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/box-only-left-candidate.png?$modena=vue-personal-page" alt="Web application final approach" class="limited-size-image"></p></li> <li>
                Si, per un grup determinat, un número només pot anar a la casella X, aquest número ha d'anar a la casella X i no és vàlid en cap altra casella dels grups de la casella X:
                <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/group-single-candidate.png?$modena=vue-personal-page" alt="Web application final approach" class="limited-size-image"></p></li> <li>
                Si 2-3 caselles d'un grup només poden tenir els mateixos 2-3 números, aquests números no són vàlids en cap altra casella del mateix grup:
                <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/owned-candidates.png?$modena=vue-personal-page" alt="Web application final approach" class="limited-size-image"></p></li> <li>
                Si, per una regió determinada, les úniques caselles on pot anar un número estan a la mateixa fila o columna, aquest número no és vàlid a cap altra casella de la mateixa fila o columna:
                <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/region-subset.png?$modena=vue-personal-page" alt="Web application final approach" class="limited-size-image"></p></li></ul> <p>I això vindria a ser tot. Vaig haver de dedicar-hi al voltant de 75 hores per aconseguir el que en diriem un generador acceptable. El resultat és menys complet del que m'havia imaginat en un principi, però les coses no són mai com esperes que siguin. Ets lliure de fer servir el generador si vols, però hi ha dues coses que has de saber: no esta adaptat per mòbils i no vaig treballar en regular la dificultat, cosa que genera sudokus refotudament complicats. Bona sort i fins al proper post!</p></div></div> <!----> <!----> <div><div class="blog-entry-footer"><div data-v-1b8ef962="" id="mc_embed_signup" class="has-border-bottom"><form data-v-1b8ef962="" action="https://gmail.us4.list-manage.com/subscribe/post?u=1268a6ca6cbf3464a492cbc92&amp;id=06423c24b8" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate="novalidate" class="validate"><div data-v-1b8ef962="" id="mc_embed_signup_scroll"><h4 data-v-1b8ef962="">Join the newsletter</h4> <p data-v-1b8ef962="">Subscribe to get email notifications every time I post a new entry. Unsubscribe at any time</p> <div data-v-1b8ef962="" class="inputs-wrapper"><input data-v-1b8ef962="" type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Email address" required="required" class="email"> <input data-v-1b8ef962="" type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-info"></div> <div data-v-1b8ef962="" aria-hidden="true" style="display: none;"><input data-v-1b8ef962="" type="text" name="b_1268a6ca6cbf3464a492cbc92_06423c24b8" tabindex="-1" value=""></div></div></form></div> <div class="navigation-buttons"><button type="button" class="btn btn-primary">Previous</button> <!----> <button type="button" class="btn btn-primary">Following</button></div></div></div></div></div></section></div>
        <!-- built files will be auto injected -->
    <script type="text/javascript" src="/js/index.bundle.js?$modena=vue-personal-page"></script><script type="text/javascript" src="/js/editor.worker.bundle.js?$modena=vue-personal-page"></script><script type="text/javascript" src="/js/json.worker.bundle.js?$modena=vue-personal-page"></script><script type="text/javascript" src="/js/css.worker.bundle.js?$modena=vue-personal-page"></script><script type="text/javascript" src="/js/html.worker.bundle.js?$modena=vue-personal-page"></script><script type="text/javascript" src="/js/ts.worker.bundle.js?$modena=vue-personal-page"></script>

</body></html>