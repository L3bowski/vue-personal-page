<!DOCTYPE html><html><head>
        <title>Sudoku generation | Carles Capellas</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="author" content="Carles Capellas">
        <meta name="theme-color" content="#000000">
        <meta name="robots" content="index, follow">

        <script type="text/javascript">
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                    navigator.serviceWorker.register('/sw.js?$modena=vue-personal-page', {
                        scope: '/vue-personal-page'
                    });
                });
            }
        </script>
        <link rel="manifest" href="/manifest.json?$modena=vue-personal-page">
        <link rel="icon" type="image/png" href="/favicon.png?$modena=vue-personal-page">
    <link href="/css/index.css?$modena=vue-personal-page" rel="stylesheet"><script async="" src="https://www.google-analytics.com/analytics.js" charset="utf-8"></script><meta data-vue-meta="1" name="description" content="All you need to know in order to build a sudoku generator"></head>
    <body id="page-top">
        <noscript>
            <h1>Carles Capellas</h1>
            <p>JavaScript is required to load my page</p>
        </noscript>
        <div id="app"><nav id="main-nav" class="navbar navbar-expand-md fixed-top navbar-shrink"><div class="container"><button type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler navbar-toggler-right"><i class="fa fa-bars fa-2x"></i></button> <div id="navbarResponsive" class="collapse navbar-collapse"><ul class="navbar-nav text-uppercase ml-auto"><li class="nav-item"><a class="theme-switcher clickable"><span>🌗</span></a></li> <li class="nav-item"><a href="/vue-personal-page/" class="nav-link router-link-active">Home</a></li> <li class="nav-item"><a href="/vue-personal-page/blog" class="nav-link router-link-active">Blog</a></li> <li class="nav-item"><a href="/vue-personal-page/projects" class="nav-link">Projects</a></li> <li class="nav-item"><a href="/vue-personal-page/trips" class="nav-link">Trips</a></li> <li class="nav-item"><a target="_blank" href="/pdf/cv.pdf?$modena=vue-personal-page" class="nav-link">CV</a></li></ul></div></div></nav> <!----> <section class="container navbar-spacer"><div class="blog-entry"><div class="blog-entry-header"><div><h4 class="blog-title">Sudoku generation</h4> <p><span class="blog-date">📅 2020-04-29</span> <span class="blog-duration">🕐 9 mins</span> <span><span class="blog-language clickable">🌎 CA</span><span class="blog-language clickable selected">🌎 EN</span></span> <span class="blog-tag web-development-tag">Web development</span></p> <div class="navigation-buttons"><button type="button" class="btn btn-primary">Previous</button> <!----> <button type="button" class="btn btn-primary">Following</button></div></div></div> <div class="article-container"><!----> <div><p>
        My mother has always been a fervent newspaper reader and she is in the habit of solving the puzzles that come in the last pages. Between those puzzles you can always find a game called
        <a href="https://en.wikipedia.org/wiki/Sudoku" target="_blank">sudoku</a>. Two actually; a reasonably difficult one and an evil one. So she was in the middle of filling the first sudoku when I interrupted her. I don't remember what for but I do remember that we talked about sudoku and it was the difference between the two sudoku levels that caught my attention.
    </p> <div><div class="screen-splitter"><div><div class="sudoku-grid size-9"><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">1</div><div class="sudoku-cell">7</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">5</div><div class="sudoku-cell">3</div></div><div class="sudoku-row"><div class="sudoku-cell">3</div><div class="sudoku-cell">5</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div><div class="sudoku-cell">4</div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div><div class="sudoku-cell">9</div></div><div class="sudoku-row"><div class="sudoku-cell">8</div><div class="sudoku-cell">9</div><div class="sudoku-cell"> </div><div class="sudoku-cell">3</div><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell">5</div><div class="sudoku-cell">3</div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell">7</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">5</div><div class="sudoku-cell"> </div><div class="sudoku-cell">6</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell">1</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div><div class="sudoku-cell"> </div><div class="sudoku-cell">5</div><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div><div class="sudoku-cell">5</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">3</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div><div class="sudoku-cell">5</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div><div class="sudoku-cell">9</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div><div class="sudoku-cell"> </div></div></div> <p class="text-center">Easy sudoku</p></div> <div><div class="sudoku-grid size-9"><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div></div><div class="sudoku-row"><div class="sudoku-cell">4</div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div><div class="sudoku-cell">1</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">2</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">4</div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div><div class="sudoku-cell">1</div><div class="sudoku-cell"> </div><div class="sudoku-cell">3</div><div class="sudoku-cell"> </div><div class="sudoku-cell">5</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell">9</div><div class="sudoku-cell">6</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell">9</div><div class="sudoku-cell">8</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div></div><div class="sudoku-row"><div class="sudoku-cell">5</div><div class="sudoku-cell">1</div><div class="sudoku-cell"> </div><div class="sudoku-cell">8</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">7</div></div><div class="sudoku-row"><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">6</div><div class="sudoku-cell"> </div><div class="sudoku-cell"> </div><div class="sudoku-cell">1</div></div></div> <p class="text-center">Hard sudoku</p></div></div> <p>
            In the particular newspaper my mom was reading that day, the easy sudokdu had 28 filled boxes out of the 81 total whereas the difficult sudoku had 29 filled boxes.
            <b>How come the more difficult puzzle had more filled boxes!?</b> Or, in other words, isn't the difficulty of a sudoku based on the number of filled boxes? At least, that was the feeling I had back then. The truth is that I had never taken the time to think about how sudoku are generated. I had solved a few of them sure, but I had never tried to figure out how to generate one.
        </p> <p>
            In fact, it turns out is not easy at all. An important property of a well-composed sudoku is that it has only one possible solution. It might sound obvious but, depending on how many and which boxes are filled, there can be multiple valid combinations that solve the puzzle. The most famous example is the sudoku that UK Sky TV draw in a hillside offering a £5000 prize for the solution; it turned out to have
            <a href="https://www.sudokuwiki.org/Sudoku_Creation_and_Grading.pdf" target="_blank">1905 possible solutions</a>. That
            anecdote aroused my curiosity.
        </p> <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/sky-tv-hillside.jpg?$modena=vue-personal-page" alt="Sky TV hillside sudoku"></p> <p><b>Usually I would have thought about it for a while</b>, realize it is a mathematically complex task, conclude that the amount of spare time required to find a solution was much bigger than the curiosity I had on the subject
            <b>and finallly gave up</b>. Nevertheless I had just started a sabbatical leave at my company and, due to COVID-19 prevention measures, the one way flight I was supposed to catch on March 31st to go living in Australia got cancelled.
            <b>Given I found myself unemployed, locked at home and provided with the biggest amount of free hours I had ever had in my life</b> (in Spain the coronavirus lockdown started March 15th and it was meant to last at least for one month), I decided to figure out how to generate sudoku 💪
        </p> <p>
            What followed next was a much longer journey that I had expected in the beginning. I was about to quit the project many times but, luckily, I watched
            <a href="https://www.imdb.com/title/tt4276820/" target="_blank">The Founder</a> in the meanwhile, the movie that explains how Ray Kroc turned McDonald's into the biggest restaurant business in the world thanks to his bulletproof persistence. If you must know, this odyssey had four stages:
        </p> <p><b>1. Results, results, results</b>: I couldn't fight the urge of wanting to see something done whithout thinking much. I assumed that the process of generating a 9x9 sudoku would be the same as generating a 4x4 one and I went for a quick command line algorithm.
        </p> <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/command-line.png?$modena=vue-personal-page" alt="Command line generated sudoku" class="limited-size-image"></p> <p><b>2. Damn! I need a graphical tool</b>: In theory, I just needed to adapt the algorithm to generate 9x9 sudoku and that would be the end of story. At practice, turns out that 9x9 sudokus have little to do with 4x4 sudokus. I couldn't figure out what I was doing wrong just by reading the command line output, so I was compelled to built a graphical tool.
        </p> <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/command-line-error.png?$modena=vue-personal-page" alt="Command line generation error" class="limited-size-image"></p> <p><b>3. Frog... this is complicated</b>: It didn't take me much time to create a web application that could display 9x9 sudoku. With the visual representation of the sudoku and the ability to fill boxes back and forth I began to understand what I was missing out. The sudoku basic rules (e.g., a number can't be placed in a box if the same number is already placed in the column, region or row of that box) contain a set of derived rules, which are not easy to see at first glance.
        </p> <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/web-app-first-approach.png?$modena=vue-personal-page" alt="Web application first approach" class="limited-size-image"></p> <p><b>4. The light at the end of the tunnel</b>: After sitting down and thinking about it, as I should have done from the beginning, I figured out some of those dervied rules that help discarding possible numbers from boxes. Having found out about those little bastards, it was just a matter of rewritting the algorithm to consider them. It took me a number of hours, but I could finally get a working generator.
        </p> <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/web-app-final-approach.png?$modena=vue-personal-page" alt="Web application final approach" class="limited-size-image"></p> <p>
            Hey look ma, I made it! In my case I didn't build a massive hamburger empire but this humble
            <a href="/sudoku-generator" target="_blank">sudoku generator</a>. I must admit that it sometimes reaches dead ends during generation, having to drop the work and start again from scratch, but it always ends up generating valid single solution puzzles. If you are wondering, these are the rules the algorithm uses to generate sudoku. In fact, these are probably the rules you use when you are solving those puzzles too.
        </p> <ul><li>
                If a box has only one possible number left, the number must be placed in that box and it's not valid in any peer box:
                <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/box-only-left-candidate.png?$modena=vue-personal-page" alt="Web application final approach" class="limited-size-image"></p></li> <li>
                If a number can only be placed in one box for a given group (column, region or row), the number must be placed in that box and it's not valid in any peer box:
                <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/group-single-candidate.png?$modena=vue-personal-page" alt="Web application final approach" class="limited-size-image"></p></li> <li>
                If 2-3 boxes in a group have only the same 2-3 numbers available, those numbers are not valid in the rest of boxes in the group:
                <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/owned-candidates.png?$modena=vue-personal-page" alt="Web application final approach" class="limited-size-image"></p></li> <li>
                If the only boxes where a number is available for a given region are in the same row or column, that number is not valid in the rest of boxes of that row or column:
                <p class="text-center"><img src="/src/components/blog/entries/sudoku-generation/region-subset.png?$modena=vue-personal-page" alt="Web application final approach" class="limited-size-image"></p></li></ul> <p>That's pretty much it. I had to work on it around 75 hours to get some kind of acceptable sudoku generator. It was finally less complete than what I wanted it to be, but things never turn out the way you expect them to. Feel free to use the generator, but there two things you must know: it isn't mobile friendly and I didn't work on configuring the difficulty, which makes the generated puzzles pretty hardcore. Good luck and see you in the next post!</p></div></div> <!----> <div><div class="blog-entry-footer"><div data-v-1b8ef962="" id="mc_embed_signup" class="has-border-bottom"><form data-v-1b8ef962="" action="https://gmail.us4.list-manage.com/subscribe/post?u=1268a6ca6cbf3464a492cbc92&amp;id=06423c24b8" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate="novalidate" class="validate"><div data-v-1b8ef962="" id="mc_embed_signup_scroll"><h4 data-v-1b8ef962="">Join the newsletter</h4> <p data-v-1b8ef962="">Subscribe to get email notifications every time I post a new entry. Unsubscribe at any time</p> <div data-v-1b8ef962="" class="inputs-wrapper"><input data-v-1b8ef962="" type="email" value="" name="EMAIL" id="mce-EMAIL" placeholder="Email address" required="required" class="email"> <input data-v-1b8ef962="" type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn btn-info"></div> <div data-v-1b8ef962="" aria-hidden="true" style="display: none;"><input data-v-1b8ef962="" type="text" name="b_1268a6ca6cbf3464a492cbc92_06423c24b8" tabindex="-1" value=""></div></div></form></div> <div class="navigation-buttons"><button type="button" class="btn btn-primary">Previous</button> <!----> <button type="button" class="btn btn-primary">Following</button></div></div></div></div></div></section></div>
        <!-- built files will be auto injected -->
    <script type="text/javascript" src="/js/index.bundle.js?$modena=vue-personal-page"></script><script type="text/javascript" src="/js/editor.worker.bundle.js?$modena=vue-personal-page"></script><script type="text/javascript" src="/js/json.worker.bundle.js?$modena=vue-personal-page"></script><script type="text/javascript" src="/js/css.worker.bundle.js?$modena=vue-personal-page"></script><script type="text/javascript" src="/js/html.worker.bundle.js?$modena=vue-personal-page"></script><script type="text/javascript" src="/js/ts.worker.bundle.js?$modena=vue-personal-page"></script>

</body></html>